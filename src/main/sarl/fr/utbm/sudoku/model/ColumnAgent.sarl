/** 
 * 
 */
package fr.utbm.sudoku.model

import fr.utbm.sudoku.events.ColAgentSpawned
import fr.utbm.sudoku.events.PositionY
import io.sarl.core.DefaultContextInteractions
import io.sarl.core.Initialize
import io.sarl.core.InnerContextAccess
import io.sarl.core.Logging
import java.util.HashMap
import java.util.List
import java.util.UUID

/** 
 * @author Clément Bareth-Desgranges <clement.bareth@gmail.com>
 * 
 */
agent ColumnAgent extends RegionAgent {
	uses Logging, InnerContextAccess, DefaultContextInteractions

	var colNum : Integer
	var colValues : List<Integer>
	var agents = new  HashMap<Integer,UUID>

	on Initialize {
		if (occurrence.parameters.length >= 2) {
			this.colNum = occurrence.parameters.get(0) as Integer
			this.colValues = occurrence.parameters.get(1) as List<Integer>
			loggingName = "ColumnAgent n° " + colNum
		}
		
		emit(new ColAgentSpawned => [
			num = colNum;
			contextId = innerContext.ID;
			spaceID = innerContext.defaultSpace.ID.ID
		])
	}

	on PositionY {
		agents.put(occurrence.pos, occurrence.id)
		info("Agent ajouté en position " + occurrence.pos)
	}
}
